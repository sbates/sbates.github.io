
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Bratty Redhead</title>
  <meta name="author" content="Sascha Bates">

  
  <meta name="description" content="&nbsp; I enjoy independent consulting.&nbsp; For that matter, I enjoyed consulting for a consulting company.&nbsp; I&rsquo;ve been doing it in one &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.brattyredhead.com/blog/page/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Bratty Redhead" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Junge' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Port+Lligat+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Philosopher' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24644588-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Bratty Redhead</a></h1>
  
    <h2>the sarcasm is free!</h2>
  
</hgroup>

</header>
  <nav role="navigation"> <ul class="subscription" data-subscription="rss">
  
  <li><a id="linkedin" href="http://linkedin.com/in/saschabates"><div></div></a></li>
  <li><a id="github" href="https://github.com/sbates"><div></div></a></li>
  <li><a id="twitter" href="https://twitter.com/sascha_d"><div></div></a></li>
  
  <li><a id="rss" href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
 
 <form action="http://www.duckduckgo.com/" method="get">
   <fieldset role="search">
   </fieldset>
 </form>
 
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About Me</a></li>
</ul>
 
</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/26/annoying-recruiter-call-45/">Annoying Recruiter Call #45</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-26T00:00:00-05:00" pubdate data-updated="true">Mar 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://fuuu.us/362.png" alt="" /></p>
<p>&nbsp;</p>
<p>I enjoy independent consulting.&nbsp; For that matter, I enjoyed consulting for a consulting company.&nbsp; I&rsquo;ve been doing it in one form or another since 2006.&nbsp; I love the variety and the challenge that comes from never knowing wtf will be thrown at me on any given day or project.&nbsp; Some days it&rsquo;s terrifying and some days I want to slap people around, but I won&rsquo;t deny that I like it.<p />Currently my LinkedIn profile, a business card and a terse web site are all I use for self-promotion. I never lack for work. I get calls every week from larger businesses looking to recruit for FTEs.&nbsp; This is rarely something I&rsquo;m interested in.&nbsp; I dislike the inevitable silo and I&rsquo;m not able to engage in the cognitive dissonance required to believe in all the meaningless BS that is part of corporate baggage.&nbsp; So I politely tell all these recruiters that, while I appreciate the contact, I&rsquo;m not looking for full time work at this time.<p />Once in a while I get contacted by recruiters looking to hire for smaller startups.&nbsp; I always listen to the pitch for these because, if the right small company comes along, I&#8217;d probably go work for them.&nbsp; <p />Sometimes they&rsquo;re way off the mark with my skillset or with people who want a culture match - like the recruiter looking to hire someone to work at a social network sports startup.&nbsp; When I told her that, unless it was bicycle racing, I wasn&rsquo;t interested, I could hear the awkward just floating through the phone.&nbsp; Obviously these guys trying to use ESPN APIs and social networking to bring people together would have nothing to say to me.<p />I had a call in December from a recruiter from a brand new startup local to the area, using a tech stack of which I approved.&nbsp; They tried to set me up but it never worked out.&nbsp; The place was all chaos and key people kept going on vacation and one thing after another.&nbsp; Eventually I forgot about it.&nbsp; Until I got a call the other day from the same recruiting company.&nbsp; They left me a voice mail, telling me they had a question and would I call.&nbsp; So I did.&nbsp; I called them today.<p />I got on the phone with the recruiter, a new one, and he literally stumbled all over himself for over a minute, trying to spit out a complete sentence.&nbsp; He finally did and I nearly hung up on him.&nbsp; The conversation went something like this:<p /><strong>Him</strong>: &ldquo;ah, um&#8230;so&#8230;you know that company we were trying to&#8230;remember you worked with my boss last year and that company&#8230;.they um, were looking for&#8230;remember we tried to set you up with X company?&rdquo;<br /><strong>Me</strong>: Yes<br /><strong>Him</strong>: Would you happen to&#8230;.they&rsquo;re looking for&#8230;it&rsquo;s really hard to find people who are into startup culture&#8230;.um&#8230;.ah&#8230;they&rsquo;re looking for&#8230;.um&#8230;developers&#8230;.and so um&#8230;I was wondering&#8230;.if, um<br /><strong>Me</strong>: I don&rsquo;t know any developers looking for work<br /><strong>Him</strong>: Oh, um&#8230;right, well, if you happen to think of anyone&#8230;could I um&#8230;send you a followup email&#8230;just in um case?<br /><strong>Me</strong>: sure &lt;click&gt;<p />Then I sent an email to his manager, the very nice, polite and professional person I&rsquo;d been talking to in December:<p />&ldquo;Hi Harry, I would appreciate it if you could let your colleagues know not to call me for the sole purpose of asking if I know anyone looking for work.&nbsp; It would probably also help their delivery if they not preface their requests with &#8220;remember the job last year we were trying to get for you but couldn&#8217;t?&#8221; and follow up with &#8220;do you know anyone else who might like to work there?&#8221;<p />Thanks,<br />Sascha</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/23/i-am-not-a-fangirl/">I Am Not a Fangirl</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-23T00:00:00-05:00" pubdate data-updated="true">Mar 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><span style="font-size: medium;"><strong>[[posterous-content:tDmkxmhdJkvcIbHmytmJ]]In the beginning, there was no Apple&#8230;</strong></span><br />I have an uneven history of geekiness.&nbsp; Most of my geek comes from my dad.&nbsp; When I was little, sometimes my parents would let me sit up late on the weekends and play Dungeons and Dragons with them and their friends.&nbsp; My dad was a bona fide war gamer.&nbsp; He even played them by mail, with maps hanging up on the wall, using sticky putty to hang counters on them.&nbsp; We didn&rsquo;t have a lot of money, but I remember pong and the first computer I played on was a TRS80.&nbsp; I played Zork, a little.&nbsp; My dad took me to wargame conventions sometimes. There were no apple products in the house.</p>
<p><span style="font-size: medium;"><strong>Still no Apple&#8230;</strong></span><br /> Left to my own devices, I was mostly just a bookworm and music junkie.&nbsp; I knew computers because they were always around at home, but I never programmed for fun.&nbsp; I made money in college tutoring computer subjects and took a few &ldquo;computer classes,&rdquo; because that was the only way to get an email address at my tiny college.&nbsp; But I didn&rsquo;t take them seriously.&nbsp; I was a Medieval Lit major and only interested in computers for email, browsing and word processing. I used a unix terminal long before I mastered DOS or even saw an apple up close.<p /><span style="font-size: medium;"><strong>Who the hell is Apple? </strong></span><br />As an undergrad I took a job doing tech support because it beat the hell out of working in the library, both fun-wise and money-wise.&nbsp; Seriously, ever mended a book binding or filed the catalog cards that come with new books?&nbsp; Helping the clueless figure things out won for me every time and tech support usually means Microsoft systems.&nbsp; So still no apple.</p>
<p><span style="font-size: medium;"><strong>Isn&rsquo;t Apple going to die a horrible corporate death?</strong></span><br />What I&rsquo;m trying to say is, I never even saw a Commodore or an Apple PC until I was an adult.&nbsp; I never had any reason for interest in Apple products.&nbsp; For years to me they were just a company about to go broke.&nbsp; All my experience was Microsoft-based.&nbsp; Then the internet boom happened and I left the Lit studies behind.&nbsp;</p>
<p><span style="font-size: medium;"><strong>Oh look, an iP&#8230;. </strong></span><br />I never wanted a Mac. I eventually bought a 4th gen iPod and really liked it. I&#8217;d never really clicked with any mobile music devices.&nbsp; But I loved the iPod and used it extensively for running.<p />I was skeptical about smartphones and I didn&rsquo;t buy one at all until the iPhone 3GS. At first I didn&#8217;t care for it as I was used to my Blackberry that I had for work.&nbsp; The transition from keyboard to touchscreen was rough.&nbsp; I still don&#8217;t care for chat clients that much although I&#8217;m a proficient typist now. It really grew on me and I eventually became quite attached to it. <p />When the 3GS caught a dunking last year, I picked up the iPhone 4 and only gave that up because ATT didn&rsquo;t work at all in my urban Minneapolis neighborhood.&nbsp; Since I needed a new phone and service, I took the opportunity to test drive an Android phone and, while it has a few good things, I&rsquo;ll gladly give it up for an iPhone5.&nbsp; iOS 5 brought the pulldown notifications which I looooved on the android.&nbsp; And while the phone still doesn&#8217;t have a blinky light, I&#8217;m so attached to my social software these days that I almost don&#8217;t need one any more.&nbsp; That may not be a good thing&#8230;.<p />Something I&#8217;ve never been able to get used to on my android are the keyboards.&nbsp; They do a few cool things I wish for on iOS(holding down the key for the shift character), but in general I mistype on them constantly and it never seems to figure out the trends.&nbsp; I always feel like iOS is reading my mind when I type.<p /><span style="font-size: medium;"><strong>Me likely teh Shuffle&#8230;.</strong></span><br /> Eventually, I discovered the Shuffle, when it first came in the small square.&nbsp; I&#8217;ve gone through 3 of them as I firmly believe they are the best music player for running ever invented.&nbsp; Apple got this so right.&nbsp; It&rsquo;s tiny, clips on to my sports bra strap and has an easy-to-identify pause button and fast forward button.&nbsp; It shuffles my playlist too. This is all I want in a running player.&nbsp; Anything else complicates tactile navigation.&nbsp; I skipped the funny rectangle shuffle - it made things complicated.<p />It&#8217;s a little irritating that it costs so much for the memory it come with, but it really approaches perfection for me.&nbsp; So I pay for it.<p /><span style="font-size: medium;"><strong>Still, who needed a Mac?&nbsp; Not I.</strong></span><br /> Despite all of this, I never wanted a Mac.&nbsp; Among other things, I had some experience with linux touchpad drivers and some older Mac touchpad drivers and they made me want to headdesk myself bloody.&nbsp; I had years of Windows experience. I knew how to fix it and I understood its quirks.&nbsp; I liked it.&nbsp; There was no Mac software for certain things I love (hello Quicken) and they aren&#8217;t really made for games.&nbsp; And their single mouse buttons gave me the creeps.&nbsp; Little did I know&#8230;</p>
<p>I always thought of Macs the way I do Volkswagen: Nice, but overpriced for what you&rsquo;re getting.&nbsp; I&rsquo;ve always liked a high screen resolution on my laptops and Macs could never give me that.&nbsp; My 11&rdquo; Sony had a 1366x800 screen resolution which I loved.&nbsp; My 13&rdquo; had 1600x1024 (or something like that).&nbsp; It was awesome and lightweight to boot.&nbsp; I could even snag a unix-like command line with Cygwin. It did everything I needed it to do.</p>
<p><span style="font-size: medium;"><strong>Until I started programming&#8230;.</strong></span><br /> 2 years ago, when I started in on Chef and Ruby, needing Rubygems and all the other disparate parts that come with managing laptop development environments, it all fell apart.&nbsp; I&rsquo;ve heard rumors that it&rsquo;s possible to get ruby environments running with Cygwin.&nbsp; As a matter of fact, I know you can because a couple of the Thoughtworks consultants forced to use client-supplied Windows laptops made it work.&nbsp; But it was painful.&nbsp; And I wanted no part of it.&nbsp;</p>
<p>I ad-hoc&rsquo;d my way through for a while by using a Linux VM.&nbsp; That worked ok, but it wasn&rsquo;t really flexible enough for me.&nbsp; Also, I ran into funky problems like some gems/tools worked on some Linux distros but not others.&nbsp; But one thing almost everything in the ENTIRE WORLD works on is Mac OSX.&nbsp; BECAUSE ALL THE DEVELOPERS ARE USING IT! And so all the Ruby and Python tools in the world work on OSX as well as common Linux distros (read: Ubuntu)</p>
<p>I eventually discovered that I really wanted a Mac because I was so tired of devoting countless cycles to shoe-horning (yak shaving) things into a workable state on my windows laptop when I knew it would all just work on a Mac.&nbsp; So I waited for the new Macbook Air to surface last July and grabbed one.&nbsp; I&rsquo;ve had it for 8 months and am pretty used to it now.&nbsp; It doesn&rsquo;t have the screen real estate that my last 13&rdquo; had, but I&rsquo;ve come to really love the touchpad and gestures.&nbsp; I also love hot key empowerment and being able to type at a comfortable command line.&nbsp; I love that, when I don&rsquo;t know wtf the OS is doing, I can drop to a command line and figure it out.&nbsp; I love that OSX comes with awesome built in tools like iPhoto and the VPN client.</p>
<p>I still have days when I&rsquo;m all key smashy omgwtf-fu mac, but they are rare.</p>
<p><span style="font-size: medium;"><strong>And then there was iPad&#8230;. </strong></span><br />I&rsquo;ve never felt the need for a tablet.&nbsp; I&rsquo;m not on the road that much these days.&nbsp; My laptop is fairly mobile.&nbsp; I have tiny hands. No seriously, I shop for winter gloves in the boys section because all the women&rsquo;s size small gloves are TOO BIG.&nbsp; WTF are my tiny hands going to do with a tablet?&nbsp;</p>
<p>It turns out, strain to reach the letters in the middle of the keyboard.</p>
<p>My recent experiences with different phones made me think I could ready for a tablet.&nbsp; I&rsquo;d canceled my iPhone contract and was going to sell it.&nbsp; But I found myself continuing to read on the iPhone and use it for things at home via wifi.&nbsp; I read a lot at night in bed in the dark. The new Samsung was too bright even with the brightness all the way down and the battery needed to be saved for when I actually needed to use the phone. I eventually got a light filter app whose sole duty is to dim the backlight even more.</p>
<p>5 months later, I&rsquo;m still using the iPhone.&nbsp; I figured I might find some use for a tablet and maybe sell the iPhone.&nbsp; Plus, I love the iPhone keyboards and the way iOS seems to read my mind when it&rsquo;s autocorrecting (most of the time).&nbsp; I&rsquo;ve never connected well with the Android keyboards, even with auxiliary apps like SwiftKey.</p>
<p>I now have a new iPad.&nbsp; It&rsquo;s really big.&nbsp; I can&rsquo;t really reach the letters in the center of the keyboard with my thumbs although it&rsquo;s nice to type on when flat.&nbsp; It&rsquo;s also really slippery and hard to use in bed.&nbsp; My case will come tomorrow.&nbsp; This will hopefully keep it from sliding out of my hands and give me some texture to hang on to.<p />I like that Tweetdeck will sync across all my devices.&nbsp; I like that I can now read PDFs without pain on a mobile device.&nbsp; I don&#8217;t like that everyone seems to think that Retina means everything should stay the same size and look nicer.&nbsp; I want smaller stuff.&nbsp; SHRINK ALL THE THINGS APPLE!<p />The iPad is not yet earning its keep.&nbsp; I&#8217;m on the extended work from home plan so it&#8217;s doing light duty at the moment.&nbsp; I am reserving judgement; although it&#8217;s possible that, if you buy the rumored 7 inch iPad later this year, I might trade you.<p /><span style="font-size: medium;"><strong>And the paraphernalia&#8230;</strong></span><br />I picked up a stand for my Macbook and a bluetooth keyboard.&nbsp; And then the Airport Express.&nbsp; I researched wireless print servers and couldn&#8217;t find a decent one for much less than the Airport.&nbsp; And the Airport will stream my iTunes too. <p /><span style="font-size: medium;"><strong>And the iTunes..</strong>.</span><br />Yeah I forgot to mention iTunes.&nbsp; I&#8217;ve been using it for years, even though it sucked up massive resources on my Windows boxes.&nbsp; It&#8217;s the easiest, most intuitive music manager I&#8217;ve ever met.&nbsp; And it manages my i-devices.&nbsp; I asked Android owners before I bought my phone, &#8220;how do you manage your phone?&#8221; They just looked at me like I was crazy.&nbsp; I still can&rsquo;t figure out if I&rsquo;ve been conditioned by Apple, but I really like having the iTunes interface to manage my phone, etc.<p /><span style="font-size: medium;"><strong>and then there was the iTunes Store&#8230;</strong></span><br />I loathe the iTunes store.&nbsp; There&rsquo;s no way to filter searches.&nbsp; There&rsquo;s no way to make it show you what you want.&nbsp; You get only what it wants you to see.&nbsp; <p /><span style="font-size: medium;"><strong>So I don&rsquo;t know, am I a fangirl?&nbsp; </strong></span><br />I&#8217;ve always thought Apple owners came across rather smug. But then I kind of fell down the slippery slope of Apple product ownership.&nbsp; I don&#8217;t feel smug.</p>
<p>I still won&rsquo;t buy iTunes content except for a few things here and there.&nbsp; I won&rsquo;t buy the Apple TV.&nbsp; I have a Roku that streams everything I need and for less money.&nbsp; <p />I don&rsquo;t care to be locked into one content provider, which is why I refused to buy a Kindle.&nbsp; Also, I love me my backlight.&nbsp; Ironically I like a smartphone/tablet for reading because it allows me to have apps for all content providers.&nbsp; In general I tend to use Amazon, but I refuse to be required to use them through the mishap of buying one of their devices.&nbsp; If Apple ever started restricting other content provider apps, I would have to take a serious look at my hardware collection.<p />I still have a Windows desktop.&nbsp; My Quicken is there.&nbsp; My (tiny) gaming collection is there.&nbsp; Calibre is there.&nbsp; Other large footprint software is there.&nbsp; I haven&rsquo;t rid myself of my 13&rdquo; Sony yet although I only open it when I need to look for something.&nbsp; It&rsquo;s my only mobile HDMI-out device at the moment.&nbsp; Apple devices don&rsquo;t play Flash and that&rsquo;s what Amazon is streaming in at the moment.<p />I&rsquo;m a big fan of their hardware.&nbsp; I love all my Apple stuff.&nbsp; But I&rsquo;m still comfortable with Windows and have nothing against it as a user (although Windows Server Administration makes me want to cut off my fingers).&nbsp; I wouldn&rsquo;t urge someone else to get an Apple device.&nbsp; I might or might not gush about it, depending on what it was.&nbsp; I kind of wish Apple had designed my treadmill. But then, I probably couldn&rsquo;t have afforded it.<p />To an outsider, I probably look like a fangirl. But if another company made something as awesome to use as an Apple product, I&rsquo;m sure I&rsquo;d buy it.&nbsp; My foray into that arena though was my Samsung Galaxy S2 which has just not been as lovable as I&rsquo;d hoped.<p />I&rsquo;ve been all &ldquo;I don&rsquo;t need Apple stuff&rdquo; my whole life. But I kinda like it, it&rsquo;s reliable and it&rsquo;s all so very comfortable to use.&nbsp; So while I may not gush, I might be a bit of a closet fangirl.&nbsp; It&rsquo;s possible&#8230;.<p /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/19/puppet-for-chef-users-part-2-when-is-a-node-a/">Puppet for Chef Users - Part 2 - When Is a Node a Node?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-19T00:00:00-06:00" pubdate data-updated="true">Nov 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Disclaimer: I have been working with Chef for about 18 months and Puppet for about 5 minutes.&nbsp; I don&#8217;t claim to be an expert on Puppet nor warranty this information in any way.&nbsp; It could all be egregiously wrong.&nbsp; This is simply a blog exploring what I&#8217;m learning.</em><p />When is a node a node?&nbsp; And when is it a thought?&nbsp; Or a regex? When is it a description of a certain state of being?<p />When I first started working in someone else&#8217;s existing puppet domain, I was confused.&nbsp; Everything was described in puppet/manifests/site.pp.&nbsp; There was a lot of description.&nbsp; Everything was called a node, regardless of what kind of object it was describing. Lists of manifests/classes were nodes, named servers were nodes, there were some regexs also designated nodes.&nbsp; I was confused.<p />Check it out.&nbsp; In Chef there are nodes.&nbsp; A node is always the endpoint in question.&nbsp; It&#8217;s a concrete item.&nbsp; It just&#8230;.is.&nbsp; A VM is a node.&nbsp; An AWS instance is a node.&nbsp; If you want to describe a node, you add recipes or roles to it.&nbsp; A recipe is a single thing.&nbsp; A role is a collection of recipes, attributes and information that comprises a functional entity.<p />In Puppet, a node is a much more nebulous concept.&nbsp; A node is still always the client endpoint.&nbsp; But, the node can also be a described end state.<p />Let&#8217;s use the ubiquitous webserver example.&nbsp; In my webserver, I will probably need a set of base OS modules/cookbooks and some webserver stuff.&nbsp; I might have a requirement set that looks like this:<p />[ dns, ntp, ssh, syslog, puppet-agent|chef-client, apache, openssl, memcached ]<p />There are some differences in Puppet and Chef management structure.&nbsp; In Chef, a node is a client, an endpoint. It&#8217;s pretty much always a server, whether hardware, VM or cloud instance.<p />In Chef I would write cookbooks for each of the items in my set.&nbsp; Then I would probably create two roles: dotcom_base and webserver<p /><strong>roles/com_base.rb</strong><br /><strong>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;</strong><br />name &#8220;dotcom_base&#8221;<br />description &#8220;The base role for ALL systems&#8221;<br />run_list(<br />&nbsp;&nbsp;&nbsp; &#8220;recipe[chef-client]&#8221;,<br />&nbsp;&nbsp;&nbsp; &#8220;recipe[syslog]&#8221;, &nbsp;<br />&nbsp;&nbsp;&nbsp; &#8220;recipe[ssh]&#8221;,<br />&nbsp;&nbsp;&nbsp; &#8220;recipe[ntp]&#8221;,<br />&nbsp;&nbsp;&nbsp; &#8220;recipe[dns]&#8221;<br />)<p /><strong>roles/webserver.rb</strong><br /><strong>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;</strong><br />name &#8220;webserver&#8221;<br />description &#8220;Role for Webservers&#8221;<br />run_list(<br />&nbsp;&nbsp;&nbsp; &#8220;recipe[apache]&#8221;,<br />&nbsp;&nbsp;&nbsp; &#8220;recipe[openssl]&#8221;, &nbsp;<br />&nbsp;&nbsp;&nbsp; &#8220;recipe[memcached]&#8221;<br />)<p />At this point I would then add both roles to any webserver node in my farm.&nbsp; Or the roles would be added at bootstrap or your choice.&nbsp; This information goes into node attributes stored in the attribute database.&nbsp; There is no flat file representation of actual named nodes.<p />Puppet is all flat file management, requiring node management to be described in flat files.&nbsp; Puppet has also chosen a flexible concept of <strong>node</strong>.<p /> A node can be a collection of similar items:  <br /><strong>node &#8220;dotcom_base&#8221;</strong> { <br /> &nbsp; include dns<br />&nbsp; include ntp<br />&nbsp; include syslog<br />&nbsp; include puppet_agent<br />}<p />A node can be a type:<br /><strong>node &#8220;webserver&#8221;</strong>&nbsp; inherits &#8220;dotcom_base&#8221; {<br />&nbsp; include apache<br />&nbsp; include openssl<br />&nbsp; include memcached<br />&nbsp;}<p />Given dotcom_web1.domain.com, dotcom_web2.domain.com, dotcom_web3.domain.com:<p />A node can just be a single endpoint:<br /><strong>node dotcom_web1.domain.com </strong>inherits &#8220;webserver&#8221;{ }<p />A node can be a collection of nodes matched with regex.<br /><strong>node /^dotcom_web\d+&#46;domain&#46;com$/</strong> inherits &#8220;webserver&#8221; { }</p>
<p>A thought on node construction: To be more transparent, these could also say <p /><em>inherits &#8220;dotcom_base&#8221; { webserver }</em><p />While I have not seen this notation, it&#8217;s what I would do if I were designing from the bottom up.&nbsp; This may or may not be correct style-wise, but I&#8217;m a fan of transparency in my config statements.</p>
<p>Puppet node information can either be described in the top level puppet/manifests/site.pp or site.pp can include a second file traditionally called nodes.pp.&nbsp; Site.pp can also include puppet conditionals, environment descriptions and params that might be specific to an environment, similar to Chef&#8217;s override attributes.</p>
<p>So, to recap, Chef and Puppet both have nodes.&nbsp; Puppet describes many different objects which are all designated nodes.&nbsp; Chef has chosen to break out object descriptions into roles and runlists for nodes.</p>
<p><strong>Chef progression: </strong>cookbook/recipe=&gt; role =&gt; node <br /><strong>Puppet progression: </strong>module/manifest =&gt; typed node description =&gt; specific/regex matched node description</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/07/puppet-for-chef-users/">Puppet for Chef Users</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-07T00:00:00-06:00" pubdate data-updated="true">Nov 7<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I picked up a Puppet gig recently.&nbsp; The client already has an OS level Puppet install working.&nbsp; My job is to use my understanding of automation tooling to configure an app stack.&nbsp; I was pretty cocky.&nbsp; I thought, well, I really know Chef after over a year working with it and extending it at another client, how hard can Puppet be?&nbsp;</p>
<p>It&#8217;s not hard really.&nbsp; But it&#8217;s not cooperative either.&nbsp; They look really similar, Puppet and Chef, but I&#8217;m finding it hard to get Puppet to do what I want.&nbsp; First, I need to figure out what I want to do.&nbsp; Then I automatically consider how I would do it in chef.&nbsp; Then I have to figure out how to do it in Puppet.&nbsp; This is harder than it sounds as a direct translation of something is not always the most useful, graceful or appropriate method.</p>
<p>I keep wishing I could find an article or manual on the Interwebs called something like &#8220;Puppet for Chef Users,&#8221; where it would translate all the things done in Chef to what they do in Puppet.&nbsp; I haven&#8217;t found it.&nbsp; And I don&#8217;t have all the answers.&nbsp; As you can see here, I actually have very few answers.&nbsp; None really.&nbsp; But I&#8217;m eking out answers as I go.</p>
<p>Example: I want to set a node attribute.&nbsp;</p>
<p>Well, hm.&nbsp; Ok.&nbsp; A node is still a node(mostly) in Puppet.&nbsp; Puppet has Facter instead of Ohai.&nbsp; Right, I knew that.&nbsp; So, then I have to address the philosophical question, is that the correct way to do what I want?&nbsp; Do I add things like myapp_home, java_install_dir to Facter?&nbsp; Yah, I think I do.&nbsp; I want stuff outside the myapp module to know where the myapp log dir is, maybe (it could happen).</p>
<p>Let&#8217;s say I do want to add custom facts.&nbsp; That&#8217;s just like node attributes aren&#8217;t they?&nbsp; I&#8217;m still not positive, but I&#8217;ve got to make a decision and start coding something.&nbsp; I can always revise if I&#8217;m wrong.</p>
<p>Alright, where&#8217;s the attributes file?&nbsp; Whoops!&nbsp; No attribute file.&nbsp; I <a href="http://forge.puppetlabs.com/tags/webserversdownloaded" target="_blank">downloaded a sample Apache module from puppet labs </a>in order to have an example to work with.&nbsp; I needed the example to be complex enough to have custom attributes but not so complicated I couldn&#8217;t read it.&nbsp; I figured an Apache server was a good compromise.&nbsp;</p>
<p>I found that Puppet modules can define new facts in the lib directory of the module.&nbsp; Strangely, at first I thought it was defined in a directory called &#8216;plugins&#8217; as I first noticed the new facts defined there.&nbsp; But as I read the <a href="http://docs.puppetlabs.com/guides/plugins_in_modules.html" target="_blank">documentation on defining new facts</a>, I realized that was the old directory. The new way dictates that all custom code goes in modules/myapp/lib.&nbsp;</p>
<p>The directory storing new facts has small rb files with code similar to ohai snippets.&nbsp; This seemed like more coding than I needed, but I&#8217;m still not sure how to just set an attribute without writing a code snippet.&nbsp; Here&#8217;s the code example I found:</p>
<p>require &#8216;facter&#8217;<br />Facter.add(:gem_passenger_version) do<br />&nbsp;&nbsp;&nbsp; setcode do %x{rpmquery &#8211;qf=&#8217;%{VERSION}&#8217; rubygem-passenger} end<br />end</p>
<p>here&#8217;s my experimental code:</p>
<p>require &#8216;facter&#8217;<br />myapp_facts={&#8220;myapp_home&#8221; =&gt; &#8220;/opt/myapp&#8221;, &#8220;myapp_server_dir&#8221; =&gt; &#8220;/opt/myapp/server&#8221;,&#8221;myapp_log_dir&#8221; =&gt; &#8220;/var/log/myapp&#8221;}<p />myapp_facts.each do |k,v|<br />&nbsp; Facter.add(k) do<br />&nbsp;&nbsp;&nbsp; setcode do { k=v } end<br />&nbsp; end<br />end</p>
<p>This is what came out of testing:</p>
<p>[root@pixel rubylib]#&nbsp; RUBYLIB=. facter|grep myapp<br />myapp_home =&gt; /opt/myapp<br />myapp_log_dir =&gt; /var/log/myapp<br />myapp_server_dir =&gt; /opt/myapp/server</p>
<p>So yay!&nbsp; I figured it out. I added my puppet equivalent of node attributes.&nbsp; Kind of.&nbsp; As far as I can tell, Facter is not hierarchical a la Ohai, so my node attributes are flattened instead of in a hierarchy.</p>
<p>To recap, in Chef/In Puppet:</p>
<ul>
<li>Ohai/Facter</li>
<li>node attributes/facts</li>
<li>ohai is hierarchical json: facter is flat key =&gt; value pairs</li>
<li>chef node attributes are defined in myapp/attributes/attribute.rb/Puppet facts are defined in myapp/lib/facts&nbsp;</li>
</ul>
<p>Coming soon, my adventures with Hiera and data storage, also Puppet ruby DSL vs Puppet Puppet DSL.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/02/things-i-learned-at-surge/">Things I Learned at Surge</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-02T00:00:00-05:00" pubdate data-updated="true">Oct 2<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Generalists are awesome. &nbsp;Value them or you&#8217;re doomed. &nbsp;They make the best diagnosticians, especially when systems are large, complex, distributed and workgroups reside in silos.</p>
<p>Cloud is awesome. &nbsp;Except when it&#8217;s not. &nbsp;Understand your vulnerabilities. Plan for failure. Don&#8217;t abuse your ops guys. Don&#8217;t abuse your devs. &nbsp;Be interested in what others are doing even if it doesn&#8217;t (seem to) directly apply to your job.</p>
<p>Buy a fucking SSD. &nbsp;Hack your kernel. &nbsp;</p>
<p>DNS is sexy. &nbsp;</p>
<p>Just because it&#8217;s up doesn&#8217;t mean it&#8217;s working.</p>
<p>Why use IBM when we have Rabbit?</p>
<p>Often the best solution is a hybrid. &nbsp;Don&#8217;t reinvent the internets unless you&#8217;re feeling clever.</p>
<p>Sales guys employ dragons and fire to prosecute leads. &nbsp;Shun assholes. &nbsp;OS projects should never skip over the governance role. &nbsp;You can always tell who&#8217;s doing devops right because they are genuinely happy.</p>
<p>Etsy used to be the anti-pattern for awesome until they experienced a culture shift causing them to become our role model for even more awesome. &nbsp;LOLcats and LOLgoats make presentations even better.</p>
<p>The best part about Surge is knowing that I was surrounded by so many smart people. &nbsp;I love the hallway track and listening to others talk about their systems, the challenges and solutions. &nbsp;I love hearing about project goals that would never have occurred to me. &nbsp;I love all the ideas I get from all the smart people talking around me all the time.</p>
<p>The only unfortunate part of the week was that there were several opposing talks where I would have liked to see both. &nbsp;I hope that there are some videos posted eventually.</p>
<p />
<p>&nbsp;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/21/wherein-sascha-ponders-a-question-thats-alrea/">Wherein Sascha Ponders a Question That&#8217;s Already Been Asked a Million Times</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-21T00:00:00-05:00" pubdate data-updated="true">Jul 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>What is DevOps?<span>&nbsp; </span>2 years ago I had no idea.<span>&nbsp; </span>I was living the cycle of poorly planned, crappily implemented projects where artisan server builds were the only way anything was built, even when it meant 125 servers. <span>&nbsp;&nbsp;</span>I actually had a PM say to my team, &ldquo;We don&rsquo;t have TIME to plan!<span>&nbsp; </span>You need to start building servers!&rdquo;<span>&nbsp; </span>I was gone for two weeks to Europe right after that and when I came back, one of my sysadmins had indeed kickstarted all 125 servers. We then spent the next 6 months fixing configurations via ssh cli foo (for i in servers; do ssh $i some monkeypatch;done).</p>
<p>I tell you this anecdote so you can understand the utter delight and abandon with which I embraced the DevOps movment when introduced 18 months ago.<span>&nbsp; </span>I was immediately wowed by the positive, inclusive attitude.<span>&nbsp; </span>I read about continuous deployment, continuous integration, test driven deployment, configuration management tools and the personal experiences of several people.<span>&nbsp; </span>I found the<a href="http://dev2ops.org/blog" title="DTO Blog" target="_blank"> DTO blog</a>, the <a href="http://theagileadmin.com/" title="Agile Admin" target="_blank">Agile Admin</a> and, of course, the Etsy <a href="http://codeascraft.etsy.com/" title="Code as Craft" target="_blank">Code as Craft</a> blog.<span>&nbsp; </span></p>
<p><span>&nbsp;</span>It&#8217;s great to see people engaged, animated and motivated to make things awesome.<span>&nbsp; </span>Instead of being beat down, embracing the ops-as-victims lifestyle, they&#8217;ve taken charge of their world and started trying to change what&#8217;s not working instead of just turning into the troll under the bridge.<span>&nbsp; </span>I&rsquo;ve spent over 10 years in corporate and I know how easy it is to feel beat down by the constant cycle of develop, implement, fail, support the failure forever.<span>&nbsp; </span>So I love me a movement that engages and tries to proactively to end the failure cycle.<span>&nbsp; </span></p>
<p>In June I had my first community interaction events at Velocity and Devopsdays, in San Jose. The atmosphere was different from any other industry conference I&rsquo;ve attended in the past.<span>&nbsp; </span>It was awesome.<span>&nbsp; </span>The energy was amazing.<span>&nbsp; </span>Many of the talks were inspiring(<a href="http://www.kitchensoap.com/" title="John Allspaw" target="_blank">John Allspaw</a>, Adam Jacob, I&rsquo;m talking to you).<span>&nbsp; </span>I finished the week with a hyperactive energy and desire to channel that energy into about 10 new things I&rsquo;d learned about.</p>
<p>A common theme during presentations, panels <span>&nbsp;</span>and over beer was the attempt to define the DevOps movement. <span>&nbsp;</span>I heard a lot of people at Velocity tell me what it&#8217;s not.<span>&nbsp; </span>It&#8217;s not a tool, it&#8217;s not a job, it&#8217;s not a job description; it&#8217;s not a title.<span>&nbsp; </span>I heard a lot of, &#8220;if you claim to be &#8216;devops,&#8217; yer doin it wrong.&#8221;</p>
<p><span>&nbsp;</span>Interestingly, in high school and college, I ran with a punk rock/goth crowd with a similar attitude.<span>&nbsp; </span>&#8220;If you claim you&#8217;re punk rock or goth, yer doin it wrong.&#8221;<span>&nbsp; </span>We were too cool for labels.<span>&nbsp; </span>In our own minds, we were outside the labeling system.<span>&nbsp; </span>Sticking a label on us or on yourself was lame and small minded.<span>&nbsp; </span>We&#8217;d say things like, &#8220;I&#8217;m not goth.<span>&nbsp; </span>I&#8217;m just myself.<span>&nbsp; </span>I don&rsquo;t conform to labels.&#8221;<span>&nbsp; </span>We were pretentious by pretending that only pretentious people actually labeled themselves.<span>&nbsp; </span>If you claimed to be punk, obviously you were a poser.</p>
<p>I&#8217;m sensing a lot of that same attitude from the folks who say, &#8220;if you call yourself a devop, yer doin it wrong.&#8221;<span>&nbsp; </span>I understand some of the desire to protect the movement from spoilage and the term from overuse.<span>&nbsp; </span>We want to keep our counterculture to ourselves.<span>&nbsp; </span>It&rsquo;s not for the likes of HP and IBM and their re-branding of old, tired products.<span>&nbsp; </span></p>
<p>I understand what people mean.<span>&nbsp; </span>Labels get in the way of the movement.<span>&nbsp; </span>Labels are limiting and, if you say you &#8220;do devops&#8221; you risk limiting yourself and the perceptions of others. I can even empathize.<span>&nbsp; </span>Every time a job comes through my inbox labeled &ldquo;devops,&rdquo; I cynically assume it&rsquo;s someone who wants to rope some poor sap of a sysadmin into a crap job by labeling it with something cool, probably hoping to get two kinds of work for the price of one.<span> </span></p>
<p>Everyone claims to be living in the DevOps moment, but what does it really mean?<span>&nbsp; Several people have asked this question and tried to answer it.&nbsp; </span>My business card has &lsquo;DevOps&rsquo; on it.<span>&nbsp; </span>But it also says Problem Solving, Middleware and other things.<span>&nbsp; </span>How dare I list Devops among my skill set? <span>&nbsp;</span>Here&#8217;s the thing.<span>&nbsp; </span>If DevOps isn&#8217;t a tool, if it isn&#8217;t a job description, if it isn&#8217;t a title, it still must describe something right?<span>&nbsp; </span>It can&rsquo;t be an empty set.<span>&nbsp; </span>Here&#8217;s what I was thinking when I put it on my card.<span>&nbsp; </span>DevOps is a framework and a philosophy.<span>&nbsp; </span>It&#8217;s a lightly codified framework for an attitude and approach to solving problems. DevOps contains the seeds from which a better culture can grow. <span>&nbsp;</span>It assumes inclusiveness, accountability and that everyone is smart. It dismisses boundaries. When I put DevOps on my business card, what I&#8217;m saying is, the word defines part of the way I think, the way I approach problem solving and it also defines the attitude I&#8217;m looking for when evaluating engagements.</p>
<p>Because of all the positive vibe around DevOps, it bothers me when I see snotty tweets or hear snarky remarks during conference presentations.&nbsp; You can call bullshit when HP starts trying to claim that its monitoring suite is &#8220;devops friendly,&#8221; or when Gartner starts writing articles that could be subtitled &#8220;How to cash in on the DevOps movement.&#8221;&nbsp; But projecting an attitude of exclusivity or just plain snark because you&#8217;re feeling protective can only hurt things.&nbsp; New folks are continually stumbling upon parts of DevOps or agile infrastructure as a movement.&nbsp; Some of them have been living the attitude for years and maybe just now realizing there are others out there.&nbsp; I guess I&#8217;d rather be a hippy flashing a peace sign at people who happen across DevOps than a hipster turning my nose up at anyone who doesn&#8217;t meet my specific criteria for cool.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/24/reason-eleventyseven-to-automate/">Reason #eleventyseven to Automate</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-24T00:00:00-05:00" pubdate data-updated="true">Jun 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>About 4 years ago, I was working for a remote client, building a  large, fragile Yantra/WebSphere environment.&nbsp; The client had chosen to  use the WebSphere embedded messaging engine (instead of MQ) for systems  critical order processing.&nbsp; The project was big, I was busy, traveling  to the client site every week and I had a constant backlog of work.&nbsp; It  seemed like there was never enough time or people to get all the work  done.<p />One day the dev team came to me with their list of 15  queues that needed configuring in dev.&nbsp; I was already overrun, had no  time and typically working 12 hours or more on the days I was onsite.<p />If  you&#8217;ve ever worked with WebSphere, you know that you pretty much get  two choices for configs: the GUI console or scripts.&nbsp; The scripting  language is based on either jython or tcl but the WebSphere specific DSL  is a bitch to deal with if you don&#8217;t know the syntax really well.<p />I  really wanted to write some WebSphere scripts to install and configure  the queues, but I told myself I just didn&#8217;t have time, what with all of  the probable debugging and figuring out how to deal with the syntactical  challenges.&nbsp; I figured it would take me less time and I&#8217;d just kick out  the queue configs super quick via the GUI.&nbsp; The GUI is tedious but not  hard and I didn&#8217;t have time to play with scripting, I thought.<p />Except.&nbsp;  All the naming was wrong apparently.&nbsp; All the queues had to be deleted a  few days later and re-created.&nbsp; I told myself the second time that it  wouldn&#8217;t happen again and I&#8217;d just be wasting valuable time, writing  scripts that wouldn&#8217;t be used again.<p />Except.&nbsp; They had to be  recreated a few times in the Test environment, for several reasons.&nbsp; And  then eventually they were revamped again to match up better with  something else.&nbsp; Not to mention we had to do the work on the queues in  prod.&nbsp; I hear that, after the project went live, they reconfigured the  queues a few more times after that.<p />This situation is one of the  more glaring moments where I can look back and say, man, you should have  taken the couple or 3 hours to write some automation scripts for a  seemingly trivial task.&nbsp; This would have made sense for several reasons:</p>
<ul>
<li>3 hours of concentrated (and let&#8217;s face it fun) time to get some  scripts written, instead of numerous occasions being interrupted to do  trivial admin work by hand</li>
<li>&nbsp;If I had written a script, anyone on the team or even someone from the noc could have done the work instead</li>
<li>I might have left something after the project that was useful in the  long run as a legacy and as an example for further scripting for the  admins who stayed behind</li>
</ul>
<p><br />I was just telling this story last week and thought that it could  really stand repeating for posterity.&nbsp; Taking the extra time to write a  script that automates a lame manual process is NEVER time wasted.&nbsp; Not  ever.&nbsp; And if anyone tries to tell you differently, you&#8217;re probably too  smart to be working with them.<br />ï»¿</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/24/59995517/">My Ohai Plugin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-24T00:00:00-05:00" pubdate data-updated="true">Jun 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/sbates/Chef-odds-n-ends/blob/master/ohai/parse_host_plugin.rb" title="The plugin at github" target="_blank">The plugin at github</a></p>
<p>When we started the Chef infrastructure automation project last year,  a dev team started up at nearly the same time.&nbsp; I didn&#8217;t know enough  about Chef to have (much of) an opinion on how others were addressing  cookbook issues they faced. So for the first few months, I worked on my  problems to solve while the devs worked on theirs.&nbsp; I did eventually  started paying attention to what was going on with the dev team and  discovered that they had started to create role names that looked like  app_name_env(e.g. riak_prod), causing a role for each app to be created  in each environment, but with nearly identical run lists.&nbsp; They were  labeling their attributes with environment and used the roles to sort  them out.</p>
<p>So we came up with a quick solution.&nbsp; We created an attribute called  node[:env] and put it in a role called env_dev, env_qa, etc.&nbsp; And the  same goes for other things we needed to set like node[:swimlane] and  node[:zone]. Every time a node was created, relevant env attribute roles  were added along with the platform_base and any application roles.&nbsp; We  all refactored our code and started using the env variable to sort out  environment-specific attributes. This worked well in the short term, for  about 6 months.</p>
<p>About 2 months ago, we started planning for provisioning a second  data center.&nbsp; With another data center containing two environments (prod  and stage) came a location issue.&nbsp; Now we have two sets of ntp servers,  different DNS servers and a whole host of location-specific coding  issues. I went to go add some location-specific roles and started  thinking about the refactoring we&rsquo;d need to do to account for two  locations.</p>
<p>As I started to make the first role, I realized that this was quickly  becoming an unwieldy solution.&nbsp; We were configuring the nodes managed  by our automation system <strong>by hand</strong>.&nbsp; This boggled me. And the number of managed nodes continues to grow.</p>
<p>&nbsp;</p>
<p>One of the problems we struggle with is that we have no system of  record.&nbsp; We get most of our new server info on spreadsheets from various  project teams or ops/mgmt teams.&nbsp; We can&rsquo;t call any central system API  to get info. &nbsp;All the servers have static IPs and minimum of two  networks. The ops team doesn&rsquo;t believe in DNS. So we have to keep all of  this information somewhere or figure out clever ways to deduce the  information we want (or set roles by hand, ugh!).</p>
<p>A secondary problem I had with the roles is that their attributes  weren&rsquo;t set early enough for me to use logic in the attributes file.&nbsp;  Node[:env] didn&rsquo;t get set until after attributes files were compile  which was causing me other problems.</p>
<p>So as I thought about the location role, I rebelled.&nbsp; I was <strong>done</strong> setting roles by hand.&nbsp; UGH!</p>
<p>All of our host names are the same length and contain a rich amount  of data encoded in their names.&nbsp; I thought that there must be a way to  extract and label that information for use as node attibutes.&nbsp; I&rsquo;m no  Ruby genius and I still struggle with anything beyond fancy scripting,  but it&rsquo;s extra fun for me to run at a problem head on and obsess over  it. And that&rsquo;s what I did.&nbsp;</p>
<p>When I came out of the weekend, I had an oHai plugin that parsed a  host name, set 3 top level attributes and 5 nested attributes thatI  thought might be useful for logic in cookbooks.&nbsp; It looks like this:</p>
<p>[root@pxqpkyapp05 tmp]# ohai -f /tmp/plugins/parse_host_plugin.rb&nbsp; -l debug<br /> [Fri, 24 Jun 2011 19:09:09 -0500] DEBUG: ohai plugin: parse_host: parsing new host pxqpkyapp05<br /> {</p>
<p><strong>&nbsp; &#8220;environment&#8221;: &#8220;qa&#8221;</strong><br /> <strong>&nbsp; &#8220;location&#8221;: &#8220;pismo&#8221;,</strong><br /> &nbsp; &#8220;hostdata&#8221;: {<br /> &nbsp;&nbsp;&nbsp; &#8220;server_type&#8221;: &#8220;application&#8221;,<br /> &nbsp;&nbsp;&nbsp; &#8220;loc&#8221;: &#8220;p&#8221;,<br /> &nbsp;&nbsp;&nbsp; &#8220;env&#8221;: &#8220;q&#8221;,<br /> &nbsp;&nbsp;&nbsp; &#8220;application&#8221;: &#8220;Pooky&#8221;,<br /> &nbsp;&nbsp;&nbsp; &#8220;platform&#8221;: &#8220;solaris&#8221;<br /> &nbsp; },<br /> }<br /> ï»¿</p>
<p>I didn&rsquo;t think this would be useful to anyone but us.&nbsp; Surely  everyone else was using Chef in the cloud, right?&nbsp; Heck no.&nbsp; It turns  out, as I was chatting with folks at Velocity last week, that several  people are data center-bound with encoded host names.&nbsp; Discussing it, I  thought it might be useful to share, even if it would require some  tweaking to make it work with any else&rsquo;s environment.</p>
<p>Basically, I set a hash with environment data and then set variables  using a regex on the host name.&nbsp; I set the environment and location vars  separately and then put indexes in the hash for any values I want to  add into the hostdata hash.&nbsp; I took most of our custom logic out, like  the node[:zone] logic that no one needs, although I left in a custom  piece I had to add for an oddly named environment at a third data center  location.&nbsp; All app names and locations have been changed to protect the  innocent (that&rsquo;s me).</p>
<p>I hope someone else can use it.&nbsp; It was my first step beyond recipes  and I&rsquo;m rather proud of it. I&#8217;ve already had a request from a team mate  to move the logic to a library so that we can use it in our host  management activities and that&#8217;s what I&#8217;m working on now.&nbsp; I&#8217;ve created a  class and a function that uses the class, but need to translate it to  Chef-specific DSL.</p>
<p>Here are some examples of how we&#8217;re using them:</p>
<p>&nbsp;</p>
<p>in the recipe: dnsinfo = search(:dns, &#8220;id:#{node.location}&#8221;)</p>
<p>in the template:</p>
<p>domain &lt;%= @dnsinfo[&#8220;domain&#8221;] %&gt;<br />search &lt;%= @dnsinfo[&#8220;search&#8221;] %&gt;<br />&lt;% @dnsinfo[&#8220;nameservers&#8221;].each do |ns| %&gt;<br />nameserver &lt;%= ns %&gt;<br />&lt;% end %&gt;</p>
<p># Unload unwanted packages<br />unless node.env == &#8220;dev&#8221; || node.attribute?(&#8220;keep_gcc&#8221;)<br />&nbsp;package &#8220;gcc&#8221; do<br />&nbsp;&nbsp; action :remove<br />&nbsp;end<br />end<p /></p>
<p>chefsearch = search(&#8220;chef_servers&#8221;,&#8221;env:#{node.env} AND id:#{node.hostdata.loc}*&#8221;).first<br />node.set.chef.my_chef_server = chefsearch[&#8220;id&#8221;]</p>
<p>node.set.chef.server_url = &#8220;http://#{node.chef.my_chef_server}&#8221;<br />node.set.chef.mrepo_url = &#8220;http://#{node.chef.my_chef_server}/mrepo&#8221;<br />node.set.chef.proxy_url = &#8220;http://#{node.chef.my_chef_server}:8000&#8221;</p>
<p>&nbsp;</p>
<p>This will also come in handy once we&#8217;ve migrated to .10 where we can  set so many more things within Chef based on environment.&nbsp; The plugin is  phrased in functions as my original plugin file was rather messy with  comments and things.&nbsp; I felt like breaking it down this way made it  easier to follow wth was going on.</p>
<p>Please let me know if you find this useful or if you have questions.&nbsp;  This is my first community contribution and so I&#8217;m kind of like the kid  with the cool shiny thing they want to show everyone.&nbsp; Look at my  shiny!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/23/another-chapter-done/">Another Chapter Done</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-23T00:00:00-05:00" pubdate data-updated="true">Jun 23<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m a professional services consultant for a truly enormous  corporation; for two more weeks.&nbsp; I turned in my two week notice today.&nbsp;  I think I&rsquo;m all done working for big companies.&nbsp; I spent 8 years at a  major retail chain doing web architecture, middleware and ops and the  last 5 years consulting for the hosting, management and monitoring  portion of a megacorp.&nbsp;</p>
<p>When I took this job, it was with a group that had been a much  smaller, recently acquired company.&nbsp; The feel was still pretty casual,  annual reviews were barely a formality, attitudes were laid back and  friendly and we rarely had to interact externally to our area. We had  separate time tracking, VPN and client systems access. &nbsp;I was told that  it still had a small-company feel and they were right mostly.&nbsp; I used a  separate VPN for email, travel booking and expense reporting.&nbsp; I was  sheltered from the corporation.&nbsp; All the engineers were.</p>
<p>This isn&rsquo;t a rant about why corporations suck.&nbsp; They&rsquo;ve got a lot  going for them.&nbsp; This one kept me in a 6 figure salary, great benefits  and a 6% 401k match. I got paid even when I was benched, although that  wasn&rsquo;t often.&nbsp; If you&rsquo;re traditionally ambitious(re: mgmt chain), I hear  they&rsquo;re great for that too.&nbsp; If you&rsquo;re a slacker, you get a pass at a  big company.&nbsp; It&rsquo;s hard to be noticed.</p>
<p>Yeah.&nbsp; It&rsquo;s hard to be noticed.&nbsp; We&rsquo;ve been through several re-orgs  since I was hired.&nbsp; ProServ was moved out of management and monitoring.&nbsp;  The work started getting monotonous.&nbsp; Half of ProServ was re-orgd out  of our group.&nbsp; We kept getting moved around.&nbsp; All our dedicated PMs were  moved to a central PMO.&nbsp; The ProServ team was largely forgotten except  by a few folks who managed our existing client base.&nbsp; Senior management  probably forgot we existed.&nbsp;&nbsp; We haven&#8217;t had a team meeting in a year.  My manager&#8217;s manager thinks I&#8217;m a man.</p>
<p>About a year ago I realized I was bored. I realized that, if I had to  architect one more WebSphere install, I might scream.&nbsp; No interesting  work was coming in.&nbsp; Very little work at all was coming in, for that  matter.&nbsp; I never lacked for work myself, but half my team was benched.&nbsp; I  started thinking about quitting.&nbsp; Then a call came in.</p>
<p>A friend working at one of our current clients was starting a  continuous integration project.&nbsp; He used to work for the same megacorp  and we&rsquo;d been friends for years.&nbsp;&nbsp; The work was outside my immediate  realm of experience.&nbsp; Learn Ruby, learn a new configuration management  tool called Chef and start figuring out how to automate the existing  infrastructure at this client.&nbsp; I was skeptical.&nbsp; I&rsquo;m pretty smart but I  have a realistic assessment of my own abilities and I had no coding  experience beyond some bash and python scripting.</p>
<p>So I dug in.&nbsp; I learned some Ruby syntax.&nbsp; I started figuring out  Chef.&nbsp; It was a steep curve but it was so interesting, fun and exciting  that I was thrilled with work for the first time in ages.&nbsp; I learned the  term &ldquo;devops.&rdquo;&nbsp; I read a bunch of blogs.&nbsp; I got really excited, in that  born again annoying kind of way.&nbsp; I knew it too and pretty much kept it  to myself, although sometimes at parties, I started gushing if someone  asked about work.&nbsp;</p>
<p>I&rsquo;ve spent the last year doing some awesome work.&nbsp; The client  experience has been incredible.&nbsp; The dev teams we&rsquo;re working next to are  practicing agile concepts.&nbsp; We work in a large open space, with pairing  monitors everywhere and you can&#8217;t throw a pen without hitting corporate  issue macs.&nbsp; The dev teams pair and we sometimes cross-team pair on  things.&nbsp; Our team has a 10 min standup every morning.&nbsp; We track stories  in a tool and showcase at our weekly planning (usually code review since  Chef configs aren&rsquo;t really &ldquo;featurable&rdquo;).&nbsp; We&rsquo;re getting monitors soon  and trying to figure out how to hook Chef into graphite to start  metricizing.</p>
<p>Something that really resonated with me at Velocity on the last day  was Adam Jacobs who said, &ldquo;You can tell the people who are doing devops  right because they&rsquo;re HAPPY all the time.&rdquo;&nbsp; That&rsquo;s what it&rsquo;s been like.&nbsp;  I&rsquo;ve never enjoyed anything so much as I have this last year.</p>
<p>Unfortunately, working for a megacorp has intruded on my professional  happiness too many times this year for me to ignore it any longer.&nbsp;  I&rsquo;ve known for a few months that this was coming.&nbsp; The project work I&rsquo;ve  been doing for the last year has been awesome and I don&rsquo;t want to leave  it behind.&nbsp; Growing my Ruby development skills has been super fun and a  big challenge.&nbsp; I hope to do more of that going forward and am planning  to work on my own projects as well.&nbsp;</p>
<p>In the meantime, I&rsquo;m going to take a little time off, ride my bike,  write some code, evaluate my options and see what&rsquo;s out there for me.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>I do nerdy stuff with computers. Sometimes I talk about it here. Beware of opinions. I have them. They totally reflect my employer since I employ myself.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/05/07/minneapolis-st-paul-infracoders-meetup-recap/">Minneapolis - St Paul Infracoders Meetup Recap</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/05/devops-consulting-why-i-don-slash-t/">Devops Consulting: Why I Don&#8217;t</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/07/coffee-nerdery-chromatic-coffee/">Coffee Nerdery: Chromatic Coffee</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/13/shell-scripts-are-like-gremlins/">Shell Scripts Are Like Gremlins</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/15/coffee-nerdery-blue-ox/">Coffee Nerdery: Blue Ox, Minneapolis</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/08/coffee-nerdery-irving-farm/">Coffee Nerdery: Irving Farm, New York</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/08/coffee-nerdery-financier/">Coffee Nerdery: Financier, New York</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/04/why-isnt-this-funny/">Why Isn&#8217;t This Funny?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/03/coffee-nerdery-la-colombe/">Coffee Nerdery: La Colombe</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/03/coffee-nerdery-macchiato/">Coffee Nerdery: Macchiato, NYC</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("sascha_d", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/sascha_d" class="twitter-follow-button" data-show-count="false">Follow @sascha_d</a>
  
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll&#8230;</ul>
  <p><a href="http://pinboard.in/u:sascha_d">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "sascha_d"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Sascha Bates -
  The sarcasm is free! - - -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'brattyredhead';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
